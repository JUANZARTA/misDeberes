"use strict";(self.webpackChunkmisDeberes=self.webpackChunkmisDeberes||[]).push([[619],{9619:(_,g,n)=>{n.r(g),n.d(g,{default:()=>F});var e=n(4438),m=n(177),u=n(7471),o=n(9417),c=n(4796);const l=r=>({"border-red-500":r});function f(r,a){1&r&&(e.j41(0,"p",18),e.EFF(1,"Debe tener al menos 3 caracteres."),e.k0s())}function p(r,a){1&r&&(e.j41(0,"p",18),e.EFF(1,"Correo inv\xe1lido."),e.k0s())}function h(r,a){1&r&&(e.j41(0,"p",18),e.EFF(1,"Debe tener al menos 6 caracteres."),e.k0s())}function b(r,a){1&r&&(e.j41(0,"p",18),e.EFF(1,"Las contrase\xf1as no coinciden."),e.k0s())}function v(r,a){if(1&r){const s=e.RV6();e.j41(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22),e.qSk(),e.j41(4,"svg",23),e.nrm(5,"path",24),e.k0s()()(),e.joV(),e.j41(6,"h3",25),e.EFF(7,"Error al Registrar"),e.k0s(),e.j41(8,"p",26),e.EFF(9),e.k0s(),e.j41(10,"button",27),e.bIt("click",function(){e.eBV(s);const t=e.XpG();return e.Njj(t.closeModal())}),e.EFF(11," Cerrar "),e.k0s()()()}if(2&r){const s=e.XpG();e.R7$(9),e.JRh(s.errorMessage)}}function w(r,a){1&r&&(e.j41(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",28),e.qSk(),e.j41(4,"svg",29),e.nrm(5,"path",30),e.k0s()()(),e.joV(),e.j41(6,"h3",25),e.EFF(7,"\xa1Registro Exitoso!"),e.k0s(),e.j41(8,"p",26),e.EFF(9,"Redirigiendo al inicio de sesi\xf3n..."),e.k0s()()())}let F=(()=>{class r{constructor(){this.fb=(0,e.WQX)(o.ok),this.router=(0,e.WQX)(u.Ix),this.authService=(0,e.WQX)(c.u),this.errorMessage="",this.showModal=!1,this.showSuccessModal=!1,this.registerForm=this.fb.group({name:["",[o.k0.required,o.k0.minLength(3)]],email:["",[o.k0.required,o.k0.email]],password:["",[o.k0.required,o.k0.minLength(6)]],confirmPassword:["",[o.k0.required]]},{validator:this.passwordsMatch})}ngOnInit(){}isInvalid(s){return this.registerForm.controls[s].invalid&&this.registerForm.controls[s].touched}passwordsMatch(s){return s.get("password")?.value===s.get("confirmPassword")?.value?null:{mismatch:!0}}onSubmit(){if(this.registerForm.valid){const{name:s,email:i,password:t}=this.registerForm.value;this.authService.register(i,t).subscribe({next:d=>{this.authService.saveUserProfile(d.localId,s,i).subscribe({next:()=>{this.showSuccessModal=!0,setTimeout(()=>{this.showSuccessModal=!1,this.router.navigate(["/login"])},1500)},error:()=>{this.showErrorModal("Error al guardar el nombre.")}})},error:d=>{this.showErrorModal(this.getFirebaseErrorMessage(d))}})}}showErrorModal(s){this.errorMessage=s,this.showModal=!0}closeModal(){this.showModal=!1}getFirebaseErrorMessage(s){return"EMAIL_EXISTS"===s?"Este correo ya est\xe1 registrado.":"Ha ocurrido un error inesperado."}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-register"]],standalone:!0,features:[e.aNF],decls:33,vars:20,consts:[[1,"flex","justify-center","items-center","h-screen","w-screen","bg-gradient-to-r","from-cyan-800","to-green-600"],[1,"bg-white","p-10","rounded-lg","shadow-lg","w-full","max-w-md"],[1,"text-center","text-3xl","font-bold","text-gray-700","mb-6"],[3,"ngSubmit","formGroup"],[1,"mb-6"],["for","name",1,"block","text-gray-600","text-sm","font-semibold"],["type","text","id","name","formControlName","name",1,"w-full","px-4","py-3","mt-2","border","rounded-lg","focus:ring","focus:ring-green-300",3,"ngClass"],["class","text-red-500 text-xs mt-1",4,"ngIf"],["for","email",1,"block","text-gray-600","text-sm","font-semibold"],["type","email","id","email","formControlName","email",1,"w-full","px-4","py-3","mt-2","border","rounded-lg","focus:ring","focus:ring-green-300",3,"ngClass"],["for","password",1,"block","text-gray-600","text-sm","font-semibold"],["type","password","id","password","formControlName","password",1,"w-full","px-4","py-3","mt-2","border","rounded-lg","focus:ring","focus:ring-green-300",3,"ngClass"],["for","confirmPassword",1,"block","text-gray-600","text-sm","font-semibold"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"w-full","px-4","py-3","mt-2","border","rounded-lg","focus:ring","focus:ring-green-300",3,"ngClass"],["type","submit",1,"w-full","bg-green-600","text-white","py-3","rounded-lg","shadow-md","hover:bg-green-700","transition","disabled:opacity-50",3,"disabled"],[1,"text-center","text-sm","text-gray-500mt-6"],["routerLink","/login",1,"text-blue-500","font-semibold","hover:underline"],["class","fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",4,"ngIf"],[1,"text-red-500","text-xs","mt-1"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-black","bg-opacity-50","z-50"],[1,"bg-white","p-6","rounded-lg","shadow-lg","max-w-sm","w-full","relative"],[1,"flex","justify-center","mb-4"],[1,"w-16","h-16","flex","items-center","justify-center","bg-red-100","rounded-full"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-8","w-8","text-red-500"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 000 16zm3-10a1 1 0 00-1.414-1.414L10 8.586 8.414 7A1 1 0 007 8.414L8.586 10 7 11.586A1 1 0 108.414 13L10 11.414l1.586 1.586A1 1 0 1013 11.586L11.414 10 13 8.414A1 1 0 0013 8z","clip-rule","evenodd"],[1,"text-xl","font-bold","text-gray-800","mb-4","text-center"],[1,"text-gray-600","text-center"],[1,"mt-4","w-full","bg-red-500","text-white","py-2","rounded-lg","hover:bg-red-600","transition",3,"click"],[1,"w-16","h-16","flex","items-center","justify-center","bg-green-100","rounded-full"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-8","w-8","text-green-500"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 000 16zm3-10l-4 4-2-2a1 1 0 00-1.414 1.414L10 14l5-5a1 1 0 00-1.414-1.414z","clip-rule","evenodd"]],template:function(i,t){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"h2",2),e.EFF(3,"Crear Cuenta"),e.k0s(),e.j41(4,"form",3),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(5,"div",4)(6,"label",5),e.EFF(7,"Nombre"),e.k0s(),e.nrm(8,"input",6),e.DNE(9,f,2,0,"p",7),e.k0s(),e.j41(10,"div",4)(11,"label",8),e.EFF(12,"Correo Electr\xf3nico"),e.k0s(),e.nrm(13,"input",9),e.DNE(14,p,2,0,"p",7),e.k0s(),e.j41(15,"div",4)(16,"label",10),e.EFF(17,"Contrase\xf1a"),e.k0s(),e.nrm(18,"input",11),e.DNE(19,h,2,0,"p",7),e.k0s(),e.j41(20,"div",4)(21,"label",12),e.EFF(22,"Confirmar Contrase\xf1a"),e.k0s(),e.nrm(23,"input",13),e.DNE(24,b,2,0,"p",7),e.k0s(),e.j41(25,"button",14),e.EFF(26," Registrarse "),e.k0s(),e.j41(27,"p",15),e.EFF(28," \xbfYa tienes cuenta? "),e.j41(29,"a",16),e.EFF(30,"Inicia sesi\xf3n"),e.k0s()()()(),e.DNE(31,v,12,1,"div",17)(32,w,10,0,"div",17),e.k0s()),2&i&&(e.R7$(4),e.Y8G("formGroup",t.registerForm),e.R7$(4),e.Y8G("ngClass",e.eq3(12,l,t.isInvalid("name"))),e.R7$(),e.Y8G("ngIf",t.isInvalid("name")),e.R7$(4),e.Y8G("ngClass",e.eq3(14,l,t.isInvalid("email"))),e.R7$(),e.Y8G("ngIf",t.isInvalid("email")),e.R7$(4),e.Y8G("ngClass",e.eq3(16,l,t.isInvalid("password"))),e.R7$(),e.Y8G("ngIf",t.isInvalid("password")),e.R7$(4),e.Y8G("ngClass",e.eq3(18,l,t.isInvalid("confirmPassword")||t.registerForm.hasError("mismatch"))),e.R7$(),e.Y8G("ngIf",t.registerForm.hasError("mismatch")),e.R7$(),e.Y8G("disabled",t.registerForm.invalid),e.R7$(6),e.Y8G("ngIf",t.showModal),e.R7$(),e.Y8G("ngIf",t.showSuccessModal))},dependencies:[m.MD,m.YU,m.bT,u.iI,u.Wk,o.X1,o.qT,o.me,o.BC,o.cb,o.j4,o.JD]})}}return r})()}}]);