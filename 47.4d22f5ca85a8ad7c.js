"use strict";(self.webpackChunkmisDeberes=self.webpackChunkmisDeberes||[]).push([[47],{5047:(y,c,l)=>{l.r(c),l.d(c,{HomeComponent:()=>b});var d=l(177),a=l(9417),e=l(4438),p=l(9211),_=l(7471);function T(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",6)(1,"h3",7),e.EFF(2),e.k0s(),e.j41(3,"div",8)(4,"button",9),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.enterTaskType(o))}),e.EFF(5,"INGRESAR"),e.k0s(),e.j41(6,"button",10),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.openEditModal(o))}),e.j41(7,"span",11),e.EFF(8,"edit"),e.k0s()(),e.j41(9,"button",12),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.openDeleteModal(o))}),e.j41(10,"span",13),e.EFF(11,"delete"),e.k0s()()()()}if(2&n){const t=r.$implicit;e.R7$(2),e.JRh(t.nombre)}}function m(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",14)(1,"div",15)(2,"h2",16),e.EFF(3,"Nuevo Tipo de Tarea"),e.k0s(),e.j41(4,"label",17),e.EFF(5,"Nombre:"),e.k0s(),e.j41(6,"input",18),e.mxI("ngModelChange",function(o){e.eBV(t);const s=e.XpG();return e.DH7(s.newTaskType,o)||(s.newTaskType=o),e.Njj(o)}),e.k0s(),e.j41(7,"div",19)(8,"button",20),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeModal())}),e.EFF(9,"Cancelar"),e.k0s(),e.j41(10,"button",21),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.addTaskType())}),e.EFF(11,"Agregar"),e.k0s()()()()}if(2&n){const t=e.XpG();e.R7$(6),e.R50("ngModel",t.newTaskType)}}function k(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",22)(1,"div",15)(2,"h2",16),e.EFF(3,"Editar Tipo de Tarea"),e.k0s(),e.j41(4,"p",23),e.EFF(5,"Modifica el nombre del tipo de tarea."),e.k0s(),e.j41(6,"label",24),e.EFF(7,"Nuevo Nombre:"),e.k0s(),e.j41(8,"input",25),e.mxI("ngModelChange",function(o){e.eBV(t);const s=e.XpG();return e.DH7(s.editedTaskType,o)||(s.editedTaskType=o),e.Njj(o)}),e.k0s(),e.j41(9,"div",19)(10,"button",26),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeEditModal())}),e.EFF(11,"Cancelar"),e.k0s(),e.j41(12,"button",27),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.saveTaskTypeEdit())}),e.EFF(13," Guardar "),e.k0s()()()()}if(2&n){const t=e.XpG();e.R7$(8),e.R50("ngModel",t.editedTaskType)}}function u(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",22)(1,"div",28)(2,"span",29),e.EFF(3," report_problem "),e.k0s(),e.j41(4,"h2",30),e.EFF(5,"\xbfEliminar Tipo de Tarea?"),e.k0s(),e.j41(6,"p",31),e.EFF(7,"\xbfEst\xe1s seguro de eliminar este tipo de tarea? Esta acci\xf3n no se puede deshacer."),e.k0s(),e.j41(8,"div",32)(9,"button",33),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeDeleteModal())}),e.EFF(10,"Cancelar"),e.k0s(),e.j41(11,"button",34),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.confirmDeleteTaskType())}),e.EFF(12," Eliminar "),e.k0s()()()()}}let b=(()=>{class n{constructor(t,i){this.taskTypeService=t,this.router=i,this.taskTypes=[],this.isModalOpen=!1,this.newTaskType="",this.isEditModalOpen=!1,this.taskTypeToEdit="",this.editedTaskType="",this.isDeleteModalOpen=!1,this.taskTypeToDelete=""}ngOnInit(){console.log("[INIT] Home cargado"),this.loadTaskTypes()}loadTaskTypes(){this.taskTypeService.getAllTaskTypes().subscribe({next:t=>{console.log("[GET] Tipos cargados:",t),this.taskTypes=t},error:t=>{console.error("[ERROR] Al obtener tipos de tarea:",t)}})}openModal(){this.isModalOpen=!0}closeModal(){this.isModalOpen=!1,this.newTaskType=""}addTaskType(){this.newTaskType.trim()&&this.taskTypeService.addTaskType(this.newTaskType).subscribe({next:()=>{this.loadTaskTypes(),this.closeModal()},error:t=>{console.error("[ERROR] Al agregar tipo:",t)}})}enterTaskType(t){console.log("[NAVIGATE TO]",t),this.router.navigate(["/app/category",t.key])}openEditModal(t){this.taskTypeToEdit=t.key,this.editedTaskType=t.nombre,this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1,this.editedTaskType="",this.taskTypeToEdit=""}saveTaskTypeEdit(){this.editedTaskType.trim()&&this.taskTypeToEdit&&this.taskTypeService.editTaskType(this.taskTypeToEdit,this.editedTaskType).subscribe({next:()=>{this.loadTaskTypes(),this.closeEditModal()},error:t=>console.error("[ERROR] Al editar tipo:",t)})}openDeleteModal(t){this.taskTypeToDelete=t.key,this.isDeleteModalOpen=!0}closeDeleteModal(){this.taskTypeToDelete="",this.isDeleteModalOpen=!1}confirmDeleteTaskType(){this.taskTypeToDelete&&this.taskTypeService.deleteTaskType(this.taskTypeToDelete).subscribe({next:()=>{this.loadTaskTypes(),this.closeDeleteModal()},error:t=>console.error("[ERROR] Al eliminar tipo:",t)})}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(p.z),e.rXU(_.Ix))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-home"]],standalone:!0,features:[e.aNF],decls:8,vars:4,consts:[[1,"p-6","w-full"],[1,"flex","flex-wrap","gap-4"],["class","bg-white rounded-lg shadow-md p-4 w-64 h-[160px] flex flex-col justify-between items-center",4,"ngFor","ngForOf"],[1,"bg-green-500","text-white","w-64","h-[160px]","rounded-lg","flex","items-center","justify-center","cursor-pointer","text-4xl",3,"click"],["class","fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-40",4,"ngIf"],["class","fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50",4,"ngIf"],[1,"bg-white","rounded-lg","shadow-md","p-4","w-64","h-[160px]","flex","flex-col","justify-between","items-center"],[1,"text-lg","font-semibold"],[1,"flex","items-center","justify-between","w-full","gap-2"],[1,"bg-teal-600","text-white","py-1","px-3","rounded","hover:bg-teal-700","transition","flex-1",3,"click"],[1,"text-sky-700","text-xl",3,"click"],[1,"material-icons","text-sky-700"],[1,"text-orange-600","text-xl",3,"click"],[1,"material-icons","text-orange-600"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-black","bg-opacity-40","z-40"],[1,"bg-white","p-6","rounded-lg","shadow-lg","w-96"],[1,"text-xl","font-bold","mb-4"],[1,"block","mb-2"],["type","text",1,"w-full","p-2","border","rounded","mb-4",3,"ngModelChange","ngModel"],[1,"flex","justify-end","gap-2"],[1,"px-4","py-2","border","rounded-md",3,"click"],[1,"px-4","py-2","bg-green-500","text-white","rounded-md",3,"click"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-gray-900","bg-opacity-50","z-50"],[1,"text-gray-600","mb-4","text-sm"],[1,"block","mb-2","font-semibold"],["type","text","placeholder","Ej: Universidad",1,"w-full","p-2","border","rounded-md","mb-4",3,"ngModelChange","ngModel"],[1,"px-4","py-2","border","rounded-md","bg-white","hover:bg-slate-200",3,"click"],[1,"px-4","py-2","bg-sky-700","text-white","rounded-md","hover:bg-sky-800",3,"click"],[1,"bg-white","p-6","rounded-lg","shadow-lg","w-80","text-center"],[1,"material-icons","text-red-600","mx-auto","mb-4",2,"font-size","48px"],[1,"text-xl","font-bold","mt-4","mb-2"],[1,"mb-6","text-gray-700"],[1,"flex","justify-center","gap-2"],[1,"px-4","py-2","border","rounded-md","hover:bg-orange-200",3,"click"],[1,"px-4","py-2","bg-orange-600","text-white","rounded-md","hover:bg-red-600",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,T,12,1,"div",2),e.j41(3,"div",3),e.bIt("click",function(){return o.openModal()}),e.EFF(4," + "),e.k0s()()(),e.DNE(5,m,12,1,"div",4)(6,k,14,1,"div",5)(7,u,13,0,"div",5)),2&i&&(e.R7$(2),e.Y8G("ngForOf",o.taskTypes),e.R7$(3),e.Y8G("ngIf",o.isModalOpen),e.R7$(),e.Y8G("ngIf",o.isEditModalOpen),e.R7$(),e.Y8G("ngIf",o.isDeleteModalOpen))},dependencies:[d.MD,d.Sq,d.bT,a.YN,a.me,a.BC,a.vS],encapsulation:2})}}return n})()}}]);