{"ast":null,"code":"import { inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NavigationEnd } from '@angular/router';\nimport { AuthService } from '../../../services/auth.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/date.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction HeaderComponent_div_20_div_4_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_div_20_div_4_button_1_Template_button_click_0_listener() {\n      const year_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r3.selectYear(year_r3));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const year_r3 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", year_r3, \" \");\n  }\n}\nfunction HeaderComponent_div_20_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtemplate(1, HeaderComponent_div_20_div_4_button_1_Template, 2, 1, \"button\", 29);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.years);\n  }\n}\nfunction HeaderComponent_div_20_div_5_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_div_20_div_5_button_5_Template_button_click_0_listener() {\n      const i_r7 = i0.ɵɵrestoreView(_r6).index;\n      const ctx_r3 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r3.selectMonth(i_r7));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const month_r8 = ctx.$implicit;\n    const i_r7 = ctx.index;\n    const ctx_r3 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassProp(\"bg-blue-500\", i_r7 === ctx_r3.selectedMonth)(\"text-cyan-700\", i_r7 === ctx_r3.selectedMonth);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", month_r8, \" \");\n  }\n}\nfunction HeaderComponent_div_20_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 31)(2, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_div_20_div_5_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.clearYearSelection());\n    });\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 33);\n    i0.ɵɵtemplate(5, HeaderComponent_div_20_div_5_button_5_Template, 2, 5, \"button\", 34);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Cambiar A\\u00F1o (\", ctx_r3.selectedYear, \") \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.months);\n  }\n}\nfunction HeaderComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"div\", 22)(2, \"h2\", 23);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, HeaderComponent_div_20_div_4_Template, 2, 1, \"div\", 24)(5, HeaderComponent_div_20_div_5_Template, 6, 2, \"div\", 25);\n    i0.ɵɵelementStart(6, \"div\", 26)(7, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_div_20_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.closeMonthModal());\n    });\n    i0.ɵɵtext(8, \" Cerrar \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", !ctx_r3.selectedYear ? \"Selecciona un A\\u00F1o\" : \"Selecciona un Mes\", \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.selectedYear);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.selectedYear);\n  }\n}\nfunction HeaderComponent_span_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 36);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.unreadCount, \" \");\n  }\n}\nfunction HeaderComponent_div_26_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 40);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_div_26_div_1_Template_div_click_0_listener() {\n      const notif_r10 = i0.ɵɵrestoreView(_r9).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.markAsRead(notif_r10.id));\n    });\n    i0.ɵɵelementStart(1, \"p\", 41);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 42);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const notif_r10 = ctx.$implicit;\n    i0.ɵɵclassProp(\"font-semibold\", !notif_r10.leido);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(notif_r10.mensaje);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 4, notif_r10.fecha, \"short\"));\n  }\n}\nfunction HeaderComponent_div_26_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43);\n    i0.ɵɵtext(1, \" Sin notificaciones \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HeaderComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtemplate(1, HeaderComponent_div_26_div_1_Template, 6, 7, \"div\", 38)(2, HeaderComponent_div_26_div_2_Template, 2, 0, \"div\", 39);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.notifications);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.notifications.length === 0);\n  }\n}\nexport let HeaderComponent = /*#__PURE__*/(() => {\n  class HeaderComponent {\n    constructor(dateService, router) {\n      this.dateService = dateService;\n      this.router = router;\n      this.showMonthModal = false;\n      this.years = [];\n      this.months = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];\n      this.selectedYear = null;\n      this.selectedMonth = null;\n      this.currentYear = '';\n      this.currentMonth = '';\n      this.currentRoute = '';\n      this.userName = ''; // Para mostrar nombre si luego se quiere\n      this.notifications = [];\n      this.unreadCount = 0;\n      this.showNotifications = false;\n      this.authService = inject(AuthService);\n    }\n    ngOnInit() {\n      this.generateYearRange(2025, 2050);\n      const today = new Date();\n      const defaultYear = today.getFullYear();\n      const defaultMonth = today.getMonth();\n      const savedYear = this.dateService.getSelectedYear();\n      const savedMonth = this.dateService.getSelectedMonth();\n      if (savedYear && savedMonth) {\n        this.selectedYear = parseInt(savedYear);\n        this.selectedMonth = parseInt(savedMonth) - 1;\n        this.dateService.setDate(this.selectedYear, this.selectedMonth + 1);\n      } else {\n        this.selectedYear = defaultYear;\n        this.selectedMonth = defaultMonth;\n        this.dateService.setDate(defaultYear, defaultMonth + 1);\n      }\n      this.dateSubscription = this.dateService.selectedDate$.subscribe(({\n        year,\n        month\n      }) => {\n        this.currentYear = year ?? '';\n        this.currentMonth = month ?? '';\n      });\n      this.routeSubscription = this.router.events.subscribe(event => {\n        if (event instanceof NavigationEnd) {\n          const path = event.urlAfterRedirects.split('/');\n          this.currentRoute = this.mapRouteToTitle(path[path.length - 1]);\n        }\n      });\n      this.loadNotifications();\n    }\n    ngOnDestroy() {\n      this.dateSubscription?.unsubscribe();\n      this.routeSubscription?.unsubscribe();\n    }\n    generateYearRange(start, end) {\n      this.years = [];\n      for (let year = start; year <= end; year++) {\n        this.years.push(year);\n      }\n    }\n    openMonthModal() {\n      this.showMonthModal = true;\n    }\n    closeMonthModal() {\n      this.showMonthModal = false;\n    }\n    clearYearSelection() {\n      this.selectedYear = null;\n    }\n    selectYear(year) {\n      this.selectedYear = year;\n    }\n    selectMonth(monthIndex) {\n      this.selectedMonth = monthIndex;\n      this.showMonthModal = false;\n      const mes = monthIndex + 1;\n      this.dateService.setDate(this.selectedYear, mes);\n      console.log('Fecha seleccionada →', this.selectedYear, mes);\n      // ✅ Notificar cambio de mes\n      const user = this.authService.getUser();\n      const uid = user?.id;\n      if (uid) {\n        const yearStr = this.selectedYear.toString();\n        const monthStr = mes.toString().padStart(2, '0');\n        this.dateService.notifyMonthChange(uid, yearStr, monthStr);\n      }\n    }\n    mapRouteToTitle(route) {\n      switch (route) {\n        case 'expense':\n          return 'Gastos';\n        case 'income':\n          return 'Ingresos';\n        case 'wallet':\n          return 'Cartera';\n        case 'saving':\n          return 'Ahorros';\n        case 'loan':\n          return 'Préstamos';\n        case 'debt':\n          return 'Deudas';\n        case 'home':\n          return 'Inicio';\n        default:\n          return this.capitalize(route);\n      }\n    }\n    capitalize(value) {\n      return value.charAt(0).toUpperCase() + value.slice(1);\n    }\n    // 📩 NOTIFICACIONES\n    toggleNotifications() {\n      this.showNotifications = !this.showNotifications;\n    }\n    loadNotifications() {\n      const user = this.authService.getUser();\n      const uid = user?.id;\n      if (!uid) return;\n      this.authService.getUserNotifications(uid).subscribe(data => {\n        if (data) {\n          this.notifications = Object.entries(data).map(([key, value]) => ({\n            id: key,\n            ...value\n          }));\n          this.unreadCount = this.notifications.filter(n => !n.leido).length;\n        }\n      });\n    }\n    markAsRead(notifId) {\n      const user = this.authService.getUser();\n      const uid = user?.id;\n      if (!uid) return;\n      this.authService.markNotificationAsRead(uid, notifId).subscribe(() => {\n        this.notifications = this.notifications.map(n => {\n          if (n.id === notifId) n.leido = true;\n          return n;\n        });\n        this.unreadCount = this.notifications.filter(n => !n.leido).length;\n      });\n    }\n    static #_ = this.ɵfac = function HeaderComponent_Factory(t) {\n      return new (t || HeaderComponent)(i0.ɵɵdirectiveInject(i1.DateService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: HeaderComponent,\n      selectors: [[\"app-header\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 27,\n      vars: 6,\n      consts: [[1, \"flex\", \"flex-col-reverse\", \"justify-between\", \"gap-6\", \"md:flex-row\", \"md:items-center\"], [1, \"capitalize\"], [1, \"text-sm\", \"font-semibold\", \"text-gray-600\", \"mb-1\"], [\"aria-label\", \"breadcrumb\", 1, \"w-max\"], [1, \"flex\", \"flex-wrap\", \"items-center\", \"w-full\", \"bg-opacity-60\", \"rounded-md\", \"bg-transparent\", \"p-0\", \"transition-all\"], [1, \"flex\", \"items-center\", \"text-blue-gray-900\", \"antialiased\", \"font-sans\", \"text-sm\", \"font-normal\", \"leading-normal\", \"cursor-pointer\", \"transition-colors\", \"duration-300\", \"hover:text-light-blue-500\"], [\"routerLink\", \"/app\"], [1, \"block\", \"antialiased\", \"font-sans\", \"text-sm\", \"leading-normal\", \"text-blue-900\", \"font-normal\", \"opacity-50\", \"transition-all\", \"hover:text-blue-500\", \"hover:opacity-100\"], [1, \"text-gray-500\", \"text-sm\", \"mx-2\", \"pointer-events-none\", \"select-none\"], [1, \"flex\", \"items-center\", \"text-blue-900\", \"font-sans\", \"text-sm\", \"font-normal\", \"leading-normal\", \"cursor-pointer\", \"transition-colors\", \"duration-300\", \"hover:text-blue-500\"], [1, \"text-blue-gray-900\", \"font-normal\"], [1, \"tracking-normal\", \"font-sans\", \"text-base\", \"font-semibold\", \"leading-relaxed\", \"text-gray-900\"], [1, \"flex\", \"items-center\"], [1, \"ml-4\", \"bg-blue-500\", \"text-white\", \"px-3\", \"py-1\", \"rounded-md\", 3, \"click\"], [\"class\", \"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\", 4, \"ngIf\"], [1, \"relative\"], [1, \"relative\", \"p-2\", \"rounded-full\", \"hover:bg-gray-100\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-blue-300\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke\", \"currentColor\", 1, \"h-6\", \"w-6\", \"text-gray-700\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\"], [\"class\", \"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1\", 4, \"ngIf\"], [\"class\", \"absolute right-0 mt-2 w-80 bg-white border rounded shadow-lg z-50 max-h-96 overflow-auto\", 4, \"ngIf\"], [1, \"fixed\", \"inset-0\", \"flex\", \"items-center\", \"justify-center\", \"bg-black\", \"bg-opacity-50\", \"z-50\"], [1, \"bg-white\", \"p-6\", \"rounded-lg\", \"shadow-lg\", \"w-96\", \"max-h-[90vh]\", \"overflow-y-auto\"], [1, \"text-lg\", \"font-semibold\", \"mb-4\", \"text-center\"], [\"class\", \"max-h-60 overflow-y-auto mb-4 px-1 py-2 border rounded-md space-y-2\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"mt-4\", \"flex\", \"justify-end\"], [1, \"bg-red-500\", \"text-white\", \"px-4\", \"py-2\", \"rounded-lg\", \"hover:bg-red-600\", 3, \"click\"], [1, \"max-h-60\", \"overflow-y-auto\", \"mb-4\", \"px-1\", \"py-2\", \"border\", \"rounded-md\", \"space-y-2\"], [\"class\", \"w-full px-4 py-2 rounded-lg bg-gray-200 hover:bg-blue-500 text-gray-800 hover:text-white transition text-center\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"w-full\", \"px-4\", \"py-2\", \"rounded-lg\", \"bg-gray-200\", \"hover:bg-blue-500\", \"text-gray-800\", \"hover:text-white\", \"transition\", \"text-center\", 3, \"click\"], [1, \"flex\", \"justify-center\", \"mb-4\"], [1, \"px-4\", \"py-2\", \"bg-blue-100\", \"text-blue-800\", \"font-medium\", \"rounded-md\", \"shadow-sm\", \"hover:bg-blue-200\", \"transition\", 3, \"click\"], [1, \"grid\", \"grid-cols-3\", \"gap-2\", \"mb-4\"], [\"class\", \"p-2 rounded-lg bg-gray-200 hover:bg-blue-500 text-gray-800 hover:text-white transition\", 3, \"bg-blue-500\", \"text-cyan-700\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"p-2\", \"rounded-lg\", \"bg-gray-200\", \"hover:bg-blue-500\", \"text-gray-800\", \"hover:text-white\", \"transition\", 3, \"click\"], [1, \"absolute\", \"top-0\", \"right-0\", \"bg-red-500\", \"text-white\", \"text-xs\", \"rounded-full\", \"px-1\"], [1, \"absolute\", \"right-0\", \"mt-2\", \"w-80\", \"bg-white\", \"border\", \"rounded\", \"shadow-lg\", \"z-50\", \"max-h-96\", \"overflow-auto\"], [\"class\", \"p-4 border-b hover:bg-gray-100 cursor-pointer\", 3, \"font-semibold\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"p-4 text-sm text-gray-500 text-center\", 4, \"ngIf\"], [1, \"p-4\", \"border-b\", \"hover:bg-gray-100\", \"cursor-pointer\", 3, \"click\"], [1, \"text-sm\", \"text-gray-700\"], [1, \"text-xs\", \"text-gray-400\"], [1, \"p-4\", \"text-sm\", \"text-gray-500\", \"text-center\"]],\n      template: function HeaderComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"p\", 2);\n          i0.ɵɵtext(3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"nav\", 3)(5, \"ol\", 4)(6, \"li\", 5)(7, \"a\", 6)(8, \"p\", 7);\n          i0.ɵɵtext(9, \" Inicio \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"span\", 8);\n          i0.ɵɵtext(11, \"/\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(12, \"li\", 9)(13, \"p\", 10);\n          i0.ɵɵtext(14);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(15, \"h6\", 11);\n          i0.ɵɵtext(16, \" Maneja tu Dinero con Confianza \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(17, \"div\", 12)(18, \"button\", 13);\n          i0.ɵɵlistener(\"click\", function HeaderComponent_Template_button_click_18_listener() {\n            return ctx.openMonthModal();\n          });\n          i0.ɵɵtext(19, \" Cambiar Mes \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(20, HeaderComponent_div_20_Template, 9, 3, \"div\", 14);\n          i0.ɵɵelementStart(21, \"div\", 15)(22, \"button\", 16);\n          i0.ɵɵlistener(\"click\", function HeaderComponent_Template_button_click_22_listener() {\n            return ctx.toggleNotifications();\n          });\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(23, \"svg\", 17);\n          i0.ɵɵelement(24, \"path\", 18);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(25, HeaderComponent_span_25_Template, 2, 1, \"span\", 19);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(26, HeaderComponent_div_26_Template, 3, 2, \"div\", 20);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate2(\" Fecha actual: \", ctx.currentYear, \"/\", ctx.currentMonth, \" \");\n          i0.ɵɵadvance(11);\n          i0.ɵɵtextInterpolate1(\" \", ctx.currentRoute, \" \");\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.showMonthModal);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.unreadCount > 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showNotifications);\n        }\n      },\n      dependencies: [CommonModule, i3.NgForOf, i3.NgIf, i3.DatePipe],\n      styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n  return HeaderComponent;\n})();","map":{"version":3,"names":["inject","CommonModule","NavigationEnd","AuthService","i0","ɵɵelementStart","ɵɵlistener","HeaderComponent_div_20_div_4_button_1_Template_button_click_0_listener","year_r3","ɵɵrestoreView","_r2","$implicit","ctx_r3","ɵɵnextContext","ɵɵresetView","selectYear","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ɵɵtemplate","HeaderComponent_div_20_div_4_button_1_Template","ɵɵproperty","years","HeaderComponent_div_20_div_5_button_5_Template_button_click_0_listener","i_r7","_r6","index","selectMonth","ɵɵclassProp","selectedMonth","month_r8","HeaderComponent_div_20_div_5_Template_button_click_2_listener","_r5","clearYearSelection","HeaderComponent_div_20_div_5_button_5_Template","selectedYear","months","HeaderComponent_div_20_div_4_Template","HeaderComponent_div_20_div_5_Template","HeaderComponent_div_20_Template_button_click_7_listener","_r1","closeMonthModal","unreadCount","HeaderComponent_div_26_div_1_Template_div_click_0_listener","notif_r10","_r9","markAsRead","id","leido","ɵɵtextInterpolate","mensaje","ɵɵpipeBind2","fecha","HeaderComponent_div_26_div_1_Template","HeaderComponent_div_26_div_2_Template","notifications","length","HeaderComponent","constructor","dateService","router","showMonthModal","currentYear","currentMonth","currentRoute","userName","showNotifications","authService","ngOnInit","generateYearRange","today","Date","defaultYear","getFullYear","defaultMonth","getMonth","savedYear","getSelectedYear","savedMonth","getSelectedMonth","parseInt","setDate","dateSubscription","selectedDate$","subscribe","year","month","routeSubscription","events","event","path","urlAfterRedirects","split","mapRouteToTitle","loadNotifications","ngOnDestroy","unsubscribe","start","end","push","openMonthModal","monthIndex","mes","console","log","user","getUser","uid","yearStr","toString","monthStr","padStart","notifyMonthChange","route","capitalize","value","charAt","toUpperCase","slice","toggleNotifications","getUserNotifications","data","Object","entries","map","key","filter","n","notifId","markNotificationAsRead","_","ɵɵdirectiveInject","i1","DateService","i2","Router","_2","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","HeaderComponent_Template","rf","ctx","HeaderComponent_Template_button_click_18_listener","HeaderComponent_div_20_Template","HeaderComponent_Template_button_click_22_listener","ɵɵelement","HeaderComponent_span_25_Template","HeaderComponent_div_26_Template","ɵɵtextInterpolate2","i3","NgForOf","NgIf","DatePipe","styles"],"sources":["E:\\Golden Panda\\8) Programacion\\MisDeberes\\MisDeberes\\src\\app\\shared\\components\\header\\header.component.ts","E:\\Golden Panda\\8) Programacion\\MisDeberes\\MisDeberes\\src\\app\\shared\\components\\header\\header.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy, inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DateService } from '../../../services/date.service';\nimport { Subscription } from 'rxjs';\nimport { Router, NavigationEnd } from '@angular/router';\nimport { AuthService } from '../../../services/auth.service';\n\n@Component({\n  selector: 'app-header',\n  standalone: true,\n  imports: [CommonModule],\n  templateUrl: './header.component.html',\n  styleUrl: './header.component.css'\n})\nexport class HeaderComponent implements OnInit, OnDestroy {\n  showMonthModal = false;\n  years: number[] = [];\n  months: string[] = [\n    'Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',\n    'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'\n  ];\n\n  selectedYear: number | null = null;\n  selectedMonth: number | null = null;\n\n  currentYear: string = '';\n  currentMonth: string = '';\n  currentRoute: string = '';\n\n  userName: string = ''; // Para mostrar nombre si luego se quiere\n\n  notifications: any[] = [];\n  unreadCount: number = 0;\n  showNotifications: boolean = false;\n\n  private dateSubscription?: Subscription;\n  private routeSubscription?: Subscription;\n  private authService = inject(AuthService);\n\n  constructor(private dateService: DateService, private router: Router) {}\n\n  ngOnInit(): void {\n    this.generateYearRange(2025, 2050);\n\n    const today = new Date();\n    const defaultYear = today.getFullYear();\n    const defaultMonth = today.getMonth();\n\n    const savedYear = this.dateService.getSelectedYear();\n    const savedMonth = this.dateService.getSelectedMonth();\n\n    if (savedYear && savedMonth) {\n      this.selectedYear = parseInt(savedYear);\n      this.selectedMonth = parseInt(savedMonth) - 1;\n      this.dateService.setDate(this.selectedYear, this.selectedMonth + 1);\n    } else {\n      this.selectedYear = defaultYear;\n      this.selectedMonth = defaultMonth;\n      this.dateService.setDate(defaultYear, defaultMonth + 1);\n    }\n\n    this.dateSubscription = this.dateService.selectedDate$.subscribe(({ year, month }) => {\n      this.currentYear = year ?? '';\n      this.currentMonth = month ?? '';\n    });\n\n    this.routeSubscription = this.router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        const path = event.urlAfterRedirects.split('/');\n        this.currentRoute = this.mapRouteToTitle(path[path.length - 1]);\n      }\n    });\n\n    this.loadNotifications();\n  }\n\n  ngOnDestroy(): void {\n    this.dateSubscription?.unsubscribe();\n    this.routeSubscription?.unsubscribe();\n  }\n\n  generateYearRange(start: number, end: number): void {\n    this.years = [];\n    for (let year = start; year <= end; year++) {\n      this.years.push(year);\n    }\n  }\n\n  openMonthModal(): void {\n    this.showMonthModal = true;\n  }\n\n  closeMonthModal(): void {\n    this.showMonthModal = false;\n  }\n\n  clearYearSelection(): void {\n    this.selectedYear = null;\n  }\n\n  selectYear(year: number): void {\n    this.selectedYear = year;\n  }\n\n  selectMonth(monthIndex: number): void {\n    this.selectedMonth = monthIndex;\n    this.showMonthModal = false;\n\n    const mes = monthIndex + 1;\n    this.dateService.setDate(this.selectedYear!, mes);\n    console.log('Fecha seleccionada →', this.selectedYear, mes);\n\n    // ✅ Notificar cambio de mes\n    const user = this.authService.getUser();\n    const uid = user?.id;\n\n    if (uid) {\n      const yearStr = this.selectedYear!.toString();\n      const monthStr = mes.toString().padStart(2, '0');\n      this.dateService.notifyMonthChange(uid, yearStr, monthStr);\n    }\n  }\n\n\n  mapRouteToTitle(route: string): string {\n    switch (route) {\n      case 'expense': return 'Gastos';\n      case 'income': return 'Ingresos';\n      case 'wallet': return 'Cartera';\n      case 'saving': return 'Ahorros';\n      case 'loan': return 'Préstamos';\n      case 'debt': return 'Deudas';\n      case 'home': return 'Inicio';\n      default: return this.capitalize(route);\n    }\n  }\n\n  capitalize(value: string): string {\n    return value.charAt(0).toUpperCase() + value.slice(1);\n  }\n\n  // 📩 NOTIFICACIONES\n\n  toggleNotifications(): void {\n    this.showNotifications = !this.showNotifications;\n  }\n\n  loadNotifications(): void {\n    const user = this.authService.getUser();\n    const uid = user?.id;\n    if (!uid) return;\n\n    this.authService.getUserNotifications(uid).subscribe((data) => {\n      if (data) {\n        this.notifications = Object.entries(data).map(([key, value]: any) => ({\n          id: key,\n          ...value\n        }));\n        this.unreadCount = this.notifications.filter(n => !n.leido).length;\n      }\n    });\n  }\n\n  markAsRead(notifId: string): void {\n    const user = this.authService.getUser();\n    const uid = user?.id;\n    if (!uid) return;\n\n    this.authService.markNotificationAsRead(uid, notifId).subscribe(() => {\n      this.notifications = this.notifications.map(n => {\n        if (n.id === notifId) n.leido = true;\n        return n;\n      });\n      this.unreadCount = this.notifications.filter(n => !n.leido).length;\n    });\n  }\n}\n","<div class=\"flex flex-col-reverse justify-between gap-6 md:flex-row md:items-center\">\n  <div class=\"capitalize\">\n\n    <!-- Fecha actual seleccionada -->\n    <p class=\"text-sm font-semibold text-gray-600 mb-1\">\n      Fecha actual: {{ currentYear }}/{{ currentMonth }}\n    </p>\n\n    <!-- Ruta Breadcrumb -->\n    <nav aria-label=\"breadcrumb\" class=\"w-max\">\n      <ol class=\"flex flex-wrap items-center w-full bg-opacity-60 rounded-md bg-transparent p-0 transition-all\">\n        <li\n          class=\"flex items-center text-blue-gray-900 antialiased font-sans text-sm font-normal leading-normal cursor-pointer transition-colors duration-300 hover:text-light-blue-500\">\n          <a routerLink=\"/app\">\n            <p\n              class=\"block antialiased font-sans text-sm leading-normal text-blue-900 font-normal opacity-50 transition-all hover:text-blue-500 hover:opacity-100\">\n              Inicio\n            </p>\n          </a>\n          <span class=\"text-gray-500 text-sm mx-2 pointer-events-none select-none\">/</span>\n        </li>\n        <li\n          class=\"flex items-center text-blue-900 font-sans text-sm font-normal leading-normal cursor-pointer transition-colors duration-300 hover:text-blue-500\">\n          <p class=\"text-blue-gray-900 font-normal\">\n            {{ currentRoute }}\n          </p>\n        </li>\n      </ol>\n    </nav>\n\n    <h6 class=\"tracking-normal font-sans text-base font-semibold leading-relaxed text-gray-900\">\n      Maneja tu Dinero con Confianza\n    </h6>\n  </div>\n\n  <div class=\"flex items-center\">\n    <!-- Botón para abrir el modal -->\n    <button (click)=\"openMonthModal()\" class=\"ml-4 bg-blue-500 text-white px-3 py-1 rounded-md\">\n      Cambiar Mes\n    </button>\n\n    <!-- Modal de selección de año y mes -->\n    <div *ngIf=\"showMonthModal\" class=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\">\n      <div class=\"bg-white p-6 rounded-lg shadow-lg w-96 max-h-[90vh] overflow-y-auto\">\n        <h2 class=\"text-lg font-semibold mb-4 text-center\">\n          {{ !selectedYear ? 'Selecciona un Año' : 'Selecciona un Mes' }}\n        </h2>\n\n        <!-- Mostrar años -->\n        <div *ngIf=\"!selectedYear\" class=\"max-h-60 overflow-y-auto mb-4 px-1 py-2 border rounded-md space-y-2\">\n          <button *ngFor=\"let year of years\" (click)=\"selectYear(year)\"\n            class=\"w-full px-4 py-2 rounded-lg bg-gray-200 hover:bg-blue-500 text-gray-800 hover:text-white transition text-center\">\n            {{ year }}\n          </button>\n        </div>\n\n        <!-- Mostrar meses si hay año seleccionado -->\n        <div *ngIf=\"selectedYear\">\n          <div class=\"flex justify-center mb-4\">\n            <button (click)=\"clearYearSelection()\"\n              class=\"px-4 py-2 bg-blue-100 text-blue-800 font-medium rounded-md shadow-sm hover:bg-blue-200 transition\">\n              Cambiar Año ({{ selectedYear }})\n            </button>\n          </div>\n\n          <div class=\"grid grid-cols-3 gap-2 mb-4\">\n            <button *ngFor=\"let month of months; let i = index\" (click)=\"selectMonth(i)\"\n              [class.bg-blue-500]=\"i === selectedMonth\" [class.text-cyan-700]=\"i === selectedMonth\"\n              class=\"p-2 rounded-lg bg-gray-200 hover:bg-blue-500 text-gray-800 hover:text-white transition\">\n              {{ month }}\n            </button>\n          </div>\n        </div>\n\n        <div class=\"mt-4 flex justify-end\">\n          <button (click)=\"closeMonthModal()\" class=\"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600\">\n            Cerrar\n          </button>\n        </div>\n      </div>\n    </div>\n\n  <!-- Botón de notificaciones -->\n  <div class=\"relative\">\n    <button (click)=\"toggleNotifications()\" class=\"relative p-2 rounded-full hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-300\">\n      <!-- Icono de campana -->\n      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6 text-gray-700\" fill=\"none\" viewBox=\"0 0 24 24\"\n           stroke=\"currentColor\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n              d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\"/>\n      </svg>\n\n      <!-- Contador de notificaciones no leídas -->\n      <span *ngIf=\"unreadCount > 0\" class=\"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1\">\n        {{ unreadCount }}\n      </span>\n    </button>\n\n    <!-- Dropdown de notificaciones -->\n    <div *ngIf=\"showNotifications\" class=\"absolute right-0 mt-2 w-80 bg-white border rounded shadow-lg z-50 max-h-96 overflow-auto\">\n      <div *ngFor=\"let notif of notifications\"\n           class=\"p-4 border-b hover:bg-gray-100 cursor-pointer\"\n           [class.font-semibold]=\"!notif.leido\"\n           (click)=\"markAsRead(notif.id)\">\n        <p class=\"text-sm text-gray-700\">{{ notif.mensaje }}</p>\n        <p class=\"text-xs text-gray-400\">{{ notif.fecha | date: 'short' }}</p>\n      </div>\n      <div *ngIf=\"notifications.length === 0\" class=\"p-4 text-sm text-gray-500 text-center\">\n        Sin notificaciones\n      </div>\n    </div>\n  </div>\n\n\n\n  </div>\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}