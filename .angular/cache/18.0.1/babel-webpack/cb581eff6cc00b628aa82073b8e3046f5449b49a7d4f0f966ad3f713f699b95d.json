{"ast":null,"code":"import { getDatabase, ref, set, get, remove } from 'firebase/database';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./auth.service\";\nimport * as i2 from \"./date.service\";\nexport let TaskTypeService = /*#__PURE__*/(() => {\n  class TaskTypeService {\n    constructor(authService, dateService) {\n      this.authService = authService;\n      this.dateService = dateService;\n      this.db = getDatabase();\n    }\n    getPath() {\n      const uid = this.authService.getUid();\n      const {\n        year,\n        month\n      } = this.dateService.getFechaActual();\n      return `/${uid}/${year}/${month}/categorias`;\n    }\n    // método para agregar tipo de tarea\n    addTaskType(nombre) {\n      const path = `${this.getPath()}/${nombre}`;\n      return set(ref(this.db, path), {\n        tareas: {}\n      });\n    }\n    // método para editar tipo de tarea\n    editTaskType(nombreAntiguo, nombreNuevo) {\n      const basePath = this.getPath();\n      const oldRef = ref(this.db, `${basePath}/${nombreAntiguo}`);\n      const newRef = ref(this.db, `${basePath}/${nombreNuevo}`);\n      return get(oldRef).then(snapshot => {\n        const data = snapshot.val();\n        return set(newRef, data).then(() => remove(oldRef));\n      });\n    }\n    // método para eliminar tipo de tarea\n    deleteTaskType(nombre) {\n      const path = `${this.getPath()}/${nombre}`;\n      return remove(ref(this.db, path));\n    } // método para obtener todos los tipos de tareas\n    getAllTaskTypes() {\n      const path = this.getPath();\n      const refPath = ref(this.db, path);\n      return from(get(refPath)).pipe(map(snapshot => Object.keys(snapshot.val() || {})));\n    }\n    static #_ = this.ɵfac = function TaskTypeService_Factory(t) {\n      return new (t || TaskTypeService)(i0.ɵɵinject(i1.AuthService), i0.ɵɵinject(i2.DateService));\n    };\n    static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: TaskTypeService,\n      factory: TaskTypeService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n  return TaskTypeService;\n})();","map":{"version":3,"names":["getDatabase","ref","set","get","remove","TaskTypeService","constructor","authService","dateService","db","getPath","uid","getUid","year","month","getFechaActual","addTaskType","nombre","path","tareas","editTaskType","nombreAntiguo","nombreNuevo","basePath","oldRef","newRef","then","snapshot","data","val","deleteTaskType","getAllTaskTypes","refPath","from","pipe","map","Object","keys","_","i0","ɵɵinject","i1","AuthService","i2","DateService","_2","factory","ɵfac","providedIn"],"sources":["E:\\Golden Panda\\8) Programacion\\MisDeberes\\misDeberes\\src\\app\\services\\taskType.service.ts"],"sourcesContent":["// Servicio para gestionar los tipos de tareas\r\nimport { Injectable } from '@angular/core';\r\nimport { getDatabase, ref, set, get, remove } from 'firebase/database';\r\nimport { AuthService } from './auth.service';\r\nimport { DateService } from './date.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TaskTypeService {\r\n  private db = getDatabase();\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private dateService: DateService\r\n  ) {}\r\n\r\n  private getPath(): string {\r\n    const uid = this.authService.getUid();\r\n    const { year, month } = this.dateService.getFechaActual();\r\n    return `/${uid}/${year}/${month}/categorias`;\r\n  }\r\n\r\n  // método para agregar tipo de tarea\r\n  addTaskType(nombre: string): Promise<void> {\r\n    const path = `${this.getPath()}/${nombre}`;\r\n    return set(ref(this.db, path), { tareas: {} });\r\n  }\r\n\r\n  // método para editar tipo de tarea\r\n  editTaskType(nombreAntiguo: string, nombreNuevo: string): Promise<void> {\r\n    const basePath = this.getPath();\r\n    const oldRef = ref(this.db, `${basePath}/${nombreAntiguo}`);\r\n    const newRef = ref(this.db, `${basePath}/${nombreNuevo}`);\r\n\r\n    return get(oldRef).then(snapshot => {\r\n      const data = snapshot.val();\r\n      return set(newRef, data).then(() => remove(oldRef));\r\n    });\r\n  }\r\n\r\n  // método para eliminar tipo de tarea\r\n  deleteTaskType(nombre: string): Promise<void> {\r\n    const path = `${this.getPath()}/${nombre}`;\r\n    return remove(ref(this.db, path));\r\n  }// método para obtener todos los tipos de tareas\r\ngetAllTaskTypes(): Observable<string[]> {\r\n  const path = this.getPath();\r\n  const refPath = ref(this.db, path);\r\n  return from(get(refPath)).pipe(\r\n    map(snapshot => Object.keys(snapshot.val() || {}))\r\n  );\r\n}\r\n\r\n}\r\n"],"mappings":"AAEA,SAASA,WAAW,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,MAAM,QAAQ,mBAAmB;;;;AAOtE,WAAaC,eAAe;EAAtB,MAAOA,eAAe;IAG1BC,YACUC,WAAwB,EACxBC,WAAwB;MADxB,KAAAD,WAAW,GAAXA,WAAW;MACX,KAAAC,WAAW,GAAXA,WAAW;MAJb,KAAAC,EAAE,GAAGT,WAAW,EAAE;IAKvB;IAEKU,OAAOA,CAAA;MACb,MAAMC,GAAG,GAAG,IAAI,CAACJ,WAAW,CAACK,MAAM,EAAE;MACrC,MAAM;QAAEC,IAAI;QAAEC;MAAK,CAAE,GAAG,IAAI,CAACN,WAAW,CAACO,cAAc,EAAE;MACzD,OAAO,IAAIJ,GAAG,IAAIE,IAAI,IAAIC,KAAK,aAAa;IAC9C;IAEA;IACAE,WAAWA,CAACC,MAAc;MACxB,MAAMC,IAAI,GAAG,GAAG,IAAI,CAACR,OAAO,EAAE,IAAIO,MAAM,EAAE;MAC1C,OAAOf,GAAG,CAACD,GAAG,CAAC,IAAI,CAACQ,EAAE,EAAES,IAAI,CAAC,EAAE;QAAEC,MAAM,EAAE;MAAE,CAAE,CAAC;IAChD;IAEA;IACAC,YAAYA,CAACC,aAAqB,EAAEC,WAAmB;MACrD,MAAMC,QAAQ,GAAG,IAAI,CAACb,OAAO,EAAE;MAC/B,MAAMc,MAAM,GAAGvB,GAAG,CAAC,IAAI,CAACQ,EAAE,EAAE,GAAGc,QAAQ,IAAIF,aAAa,EAAE,CAAC;MAC3D,MAAMI,MAAM,GAAGxB,GAAG,CAAC,IAAI,CAACQ,EAAE,EAAE,GAAGc,QAAQ,IAAID,WAAW,EAAE,CAAC;MAEzD,OAAOnB,GAAG,CAACqB,MAAM,CAAC,CAACE,IAAI,CAACC,QAAQ,IAAG;QACjC,MAAMC,IAAI,GAAGD,QAAQ,CAACE,GAAG,EAAE;QAC3B,OAAO3B,GAAG,CAACuB,MAAM,EAAEG,IAAI,CAAC,CAACF,IAAI,CAAC,MAAMtB,MAAM,CAACoB,MAAM,CAAC,CAAC;MACrD,CAAC,CAAC;IACJ;IAEA;IACAM,cAAcA,CAACb,MAAc;MAC3B,MAAMC,IAAI,GAAG,GAAG,IAAI,CAACR,OAAO,EAAE,IAAIO,MAAM,EAAE;MAC1C,OAAOb,MAAM,CAACH,GAAG,CAAC,IAAI,CAACQ,EAAE,EAAES,IAAI,CAAC,CAAC;IACnC,CAAC;IACHa,eAAeA,CAAA;MACb,MAAMb,IAAI,GAAG,IAAI,CAACR,OAAO,EAAE;MAC3B,MAAMsB,OAAO,GAAG/B,GAAG,CAAC,IAAI,CAACQ,EAAE,EAAES,IAAI,CAAC;MAClC,OAAOe,IAAI,CAAC9B,GAAG,CAAC6B,OAAO,CAAC,CAAC,CAACE,IAAI,CAC5BC,GAAG,CAACR,QAAQ,IAAIS,MAAM,CAACC,IAAI,CAACV,QAAQ,CAACE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC,CACnD;IACH;IAAC,QAAAS,CAAA,G;uBA3CYjC,eAAe,EAAAkC,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,WAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,WAAA;IAAA;IAAA,QAAAC,EAAA,G;aAAfxC,eAAe;MAAAyC,OAAA,EAAfzC,eAAe,CAAA0C,IAAA;MAAAC,UAAA,EAFd;IAAM;;SAEP3C,eAAe;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}