"use strict";(self.webpackChunkmisDeberes=self.webpackChunkmisDeberes||[]).push([[0],{3e3:(S,p,a)=>{a.r(p),a.d(p,{default:()=>C});var t=a(4438),d=a(177),h=a(7471),f=a(4796),m=a(3062);function b(n,s){if(1&n){const e=t.RV6();t.j41(0,"button",30),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG(3);return t.Njj(r.selectYear(o))}),t.EFF(1),t.k0s()}if(2&n){const e=s.$implicit;t.R7$(),t.SpI(" ",e," ")}}function g(n,s){if(1&n&&(t.j41(0,"div",28),t.DNE(1,b,2,1,"button",29),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("ngForOf",e.years)}}function x(n,s){if(1&n){const e=t.RV6();t.j41(0,"button",35),t.bIt("click",function(){const o=t.eBV(e).index,r=t.XpG(3);return t.Njj(r.selectMonth(o))}),t.EFF(1),t.k0s()}if(2&n){const e=s.$implicit,i=s.index,o=t.XpG(3);t.AVh("bg-blue-500",i===o.selectedMonth)("text-cyan-700",i===o.selectedMonth),t.R7$(),t.SpI(" ",e," ")}}function v(n,s){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"div",31)(2,"button",32),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.clearYearSelection())}),t.EFF(3),t.k0s()(),t.j41(4,"div",33),t.DNE(5,x,2,5,"button",34),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(3),t.SpI(" Cambiar A\xf1o (",e.selectedYear,") "),t.R7$(2),t.Y8G("ngForOf",e.months)}}function _(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",21)(1,"div",22)(2,"h2",23),t.EFF(3),t.k0s(),t.DNE(4,g,2,1,"div",24)(5,v,6,2,"div",25),t.j41(6,"div",26)(7,"button",27),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.closeMonthModal())}),t.EFF(8," Cerrar "),t.k0s()()()()}if(2&n){const e=t.XpG();t.R7$(3),t.SpI(" ",e.selectedYear?"Selecciona un Mes":"Selecciona un A\xf1o"," "),t.R7$(),t.Y8G("ngIf",!e.selectedYear),t.R7$(),t.Y8G("ngIf",e.selectedYear)}}function y(n,s){if(1&n&&(t.j41(0,"span",36),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.SpI(" ",e.unreadCount," ")}}function k(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",40),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.markAsRead(o.id))}),t.j41(1,"p",41),t.EFF(2),t.k0s(),t.j41(3,"p",42),t.EFF(4),t.nI1(5,"date"),t.k0s()()}if(2&n){const e=s.$implicit;t.AVh("font-semibold",!e.leido),t.R7$(2),t.JRh(e.mensaje),t.R7$(2),t.JRh(t.i5U(5,4,e.fecha,"short"))}}function w(n,s){1&n&&(t.j41(0,"div",43),t.EFF(1," Sin notificaciones "),t.k0s())}function F(n,s){if(1&n&&(t.j41(0,"div",37),t.DNE(1,k,6,7,"div",38)(2,w,2,0,"div",39),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.notifications),t.R7$(),t.Y8G("ngIf",0===e.notifications.length)}}let j=(()=>{class n{constructor(e,i){this.dateService=e,this.router=i,this.showMonthModal=!1,this.years=[],this.months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],this.selectedYear=null,this.selectedMonth=null,this.currentYear="",this.currentMonth="",this.currentRoute="",this.userName="",this.notifications=[],this.unreadCount=0,this.showNotifications=!1,this.authService=(0,t.WQX)(f.u)}ngOnInit(){this.generateYearRange(2025,2050);const e=new Date,i=e.getFullYear(),o=e.getMonth(),r=this.dateService.getSelectedYear(),l=this.dateService.getSelectedMonth();r&&l?(this.selectedYear=parseInt(r),this.selectedMonth=parseInt(l)-1,this.dateService.setDate(this.selectedYear,this.selectedMonth+1)):(this.selectedYear=i,this.selectedMonth=o,this.dateService.setDate(i,o+1)),this.dateSubscription=this.dateService.selectedDate$.subscribe(({year:c,month:u})=>{this.currentYear=c??"",this.currentMonth=u??""}),this.routeSubscription=this.router.events.subscribe(c=>{if(c instanceof h.wF){const u=c.urlAfterRedirects.split("/");this.currentRoute=this.mapRouteToTitle(u[u.length-1])}}),this.loadNotifications()}ngOnDestroy(){this.dateSubscription?.unsubscribe(),this.routeSubscription?.unsubscribe()}generateYearRange(e,i){this.years=[];for(let o=e;o<=i;o++)this.years.push(o)}openMonthModal(){this.showMonthModal=!0}closeMonthModal(){this.showMonthModal=!1}clearYearSelection(){this.selectedYear=null}selectYear(e){this.selectedYear=e}selectMonth(e){this.selectedMonth=e,this.showMonthModal=!1;const i=e+1;this.dateService.setDate(this.selectedYear,i),console.log("Fecha seleccionada \u2192",this.selectedYear,i);const r=this.authService.getUser()?.id;if(r){const l=this.selectedYear.toString(),c=i.toString().padStart(2,"0");this.dateService.notifyMonthChange(r,l,c)}}mapRouteToTitle(e){switch(e){case"expense":return"Gastos";case"income":return"Ingresos";case"wallet":return"Cartera";case"saving":return"Ahorros";case"loan":return"Pr\xe9stamos";case"debt":return"Deudas";case"home":return"Inicio";default:return this.capitalize(e)}}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}toggleNotifications(){this.showNotifications=!this.showNotifications}loadNotifications(){const i=this.authService.getUser()?.id;i&&this.authService.getUserNotifications(i).subscribe(o=>{o&&(this.notifications=Object.entries(o).map(([r,l])=>({id:r,...l})),this.unreadCount=this.notifications.filter(r=>!r.leido).length)})}markAsRead(e){const o=this.authService.getUser()?.id;o&&this.authService.markNotificationAsRead(o,e).subscribe(()=>{this.notifications=this.notifications.map(r=>(r.id===e&&(r.leido=!0),r)),this.unreadCount=this.notifications.filter(r=>!r.leido).length})}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(m.k),t.rXU(h.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-header"]],standalone:!0,features:[t.aNF],decls:27,vars:6,consts:[[1,"flex","flex-col-reverse","justify-between","gap-6","md:flex-row","md:items-center"],[1,"capitalize"],[1,"text-sm","font-semibold","text-gray-600","mb-1"],["aria-label","breadcrumb",1,"w-max"],[1,"flex","flex-wrap","items-center","w-full","bg-opacity-60","rounded-md","bg-transparent","p-0","transition-all"],[1,"flex","items-center","text-blue-gray-900","antialiased","font-sans","text-sm","font-normal","leading-normal","cursor-pointer","transition-colors","duration-300","hover:text-light-blue-500"],["routerLink","/app"],[1,"block","antialiased","font-sans","text-sm","leading-normal","text-blue-900","font-normal","opacity-50","transition-all","hover:text-blue-500","hover:opacity-100"],[1,"text-gray-500","text-sm","mx-2","pointer-events-none","select-none"],[1,"flex","items-center","text-blue-900","font-sans","text-sm","font-normal","leading-normal","cursor-pointer","transition-colors","duration-300","hover:text-blue-500"],[1,"text-blue-gray-900","font-normal"],[1,"tracking-normal","font-sans","text-base","font-semibold","leading-relaxed","text-gray-900"],[1,"flex","items-center"],[1,"ml-4","bg-blue-500","text-white","px-3","py-1","rounded-md",3,"click"],["class","fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",4,"ngIf"],[1,"relative"],[1,"relative","p-2","rounded-full","hover:bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-blue-300",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-gray-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],["class","absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1",4,"ngIf"],["class","absolute right-0 mt-2 w-80 bg-white border rounded shadow-lg z-50 max-h-96 overflow-auto",4,"ngIf"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-black","bg-opacity-50","z-50"],[1,"bg-white","p-6","rounded-lg","shadow-lg","w-96","max-h-[90vh]","overflow-y-auto"],[1,"text-lg","font-semibold","mb-4","text-center"],["class","max-h-60 overflow-y-auto mb-4 px-1 py-2 border rounded-md space-y-2",4,"ngIf"],[4,"ngIf"],[1,"mt-4","flex","justify-end"],[1,"bg-red-500","text-white","px-4","py-2","rounded-lg","hover:bg-red-600",3,"click"],[1,"max-h-60","overflow-y-auto","mb-4","px-1","py-2","border","rounded-md","space-y-2"],["class","w-full px-4 py-2 rounded-lg bg-gray-200 hover:bg-blue-500 text-gray-800 hover:text-white transition text-center",3,"click",4,"ngFor","ngForOf"],[1,"w-full","px-4","py-2","rounded-lg","bg-gray-200","hover:bg-blue-500","text-gray-800","hover:text-white","transition","text-center",3,"click"],[1,"flex","justify-center","mb-4"],[1,"px-4","py-2","bg-blue-100","text-blue-800","font-medium","rounded-md","shadow-sm","hover:bg-blue-200","transition",3,"click"],[1,"grid","grid-cols-3","gap-2","mb-4"],["class","p-2 rounded-lg bg-gray-200 hover:bg-blue-500 text-gray-800 hover:text-white transition",3,"bg-blue-500","text-cyan-700","click",4,"ngFor","ngForOf"],[1,"p-2","rounded-lg","bg-gray-200","hover:bg-blue-500","text-gray-800","hover:text-white","transition",3,"click"],[1,"absolute","top-0","right-0","bg-red-500","text-white","text-xs","rounded-full","px-1"],[1,"absolute","right-0","mt-2","w-80","bg-white","border","rounded","shadow-lg","z-50","max-h-96","overflow-auto"],["class","p-4 border-b hover:bg-gray-100 cursor-pointer",3,"font-semibold","click",4,"ngFor","ngForOf"],["class","p-4 text-sm text-gray-500 text-center",4,"ngIf"],[1,"p-4","border-b","hover:bg-gray-100","cursor-pointer",3,"click"],[1,"text-sm","text-gray-700"],[1,"text-xs","text-gray-400"],[1,"p-4","text-sm","text-gray-500","text-center"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"p",2),t.EFF(3),t.k0s(),t.j41(4,"nav",3)(5,"ol",4)(6,"li",5)(7,"a",6)(8,"p",7),t.EFF(9," Inicio "),t.k0s()(),t.j41(10,"span",8),t.EFF(11,"/"),t.k0s()(),t.j41(12,"li",9)(13,"p",10),t.EFF(14),t.k0s()()()(),t.j41(15,"h6",11),t.EFF(16," Maneja tu Dinero con Confianza "),t.k0s()(),t.j41(17,"div",12)(18,"button",13),t.bIt("click",function(){return o.openMonthModal()}),t.EFF(19," Cambiar Mes "),t.k0s(),t.DNE(20,_,9,3,"div",14),t.j41(21,"div",15)(22,"button",16),t.bIt("click",function(){return o.toggleNotifications()}),t.qSk(),t.j41(23,"svg",17),t.nrm(24,"path",18),t.k0s(),t.DNE(25,y,2,1,"span",19),t.k0s(),t.DNE(26,F,3,2,"div",20),t.k0s()()()),2&i&&(t.R7$(3),t.Lme(" Fecha actual: ",o.currentYear,"/",o.currentMonth," "),t.R7$(11),t.SpI(" ",o.currentRoute," "),t.R7$(6),t.Y8G("ngIf",o.showMonthModal),t.R7$(5),t.Y8G("ngIf",o.unreadCount>0),t.R7$(),t.Y8G("ngIf",o.showNotifications))},dependencies:[d.MD,d.Sq,d.bT,d.vh]})}}return n})(),M=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-footer"]],standalone:!0,features:[t.aNF],decls:15,vars:0,consts:[[1,"py-2"],[1,"flex","w-full","flex-wrap","items-center","justify-center","gap-6","px-2","md:justify-between"],[1,"block","antialiased","font-sans","text-sm","leading-normal","font-normal","text-inherit"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor","aria-hidden","true",1,"-mt-0.5","inline-block","h-3.5","w-3.5"],[1,"flex","items-center","gap-4"],["href","https://juanzarta.github.io/GoldenPanda/","target","_blank",1,"block","antialiased","font-sans","text-sm","leading-normal","py-0.5","px-1","font-normal","text-inherit","transition-colors","hover:text-blue-500"],["href","https://api.whatsapp.com/send/?phone=573128622945&text&type=phone_number&app_absent=0","target","_blank",1,"block","antialiased","font-sans","text-sm","leading-normal","py-0.5","px-1","font-normal","text-inherit","transition-colors","hover:text-blue-500"],["href","https://github.com/JUANZARTA","target","_blank",1,"block","antialiased","font-sans","text-sm","leading-normal","py-0.5","px-1","font-normal","text-inherit","transition-colors","hover:text-blue-500"]],template:function(i,o){1&i&&(t.j41(0,"footer",0)(1,"div",1)(2,"p",2),t.EFF(3,"\xa9 2025, Create by Juan camilo Zarta "),t.qSk(),t.nrm(4,"svg",3),t.k0s(),t.joV(),t.j41(5,"ul",4)(6,"li")(7,"a",5),t.EFF(8,"Golden Panda"),t.k0s()(),t.j41(9,"li")(10,"a",6),t.EFF(11,"About Us"),t.k0s()(),t.j41(12,"li")(13,"a",7),t.EFF(14,"GitHub"),t.k0s()()()()())}})}}return n})(),C=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-layout"]],standalone:!0,features:[t.aNF],decls:8,vars:0,consts:[[1,"min-h-screen","bg-gray-50/50"],[1,"p-4","w-full"],[1,"block","w-full","max-w-full","bg-transparent","text-white","shadow-none","rounded-xl","transition-all","px-0","py-1"],[1,"mt-12"],[1,"text-blue-gray-600"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"nav",2),t.nrm(3,"app-header"),t.k0s(),t.j41(4,"div",3),t.nrm(5,"router-outlet"),t.k0s(),t.j41(6,"div",4),t.nrm(7,"app-footer"),t.k0s()()())},dependencies:[j,M,h.n3]})}}return n})()}}]);