"use strict";(self.webpackChunkmisDeberes=self.webpackChunkmisDeberes||[]).push([[0],{3062:(F,_,a)=>{a.d(_,{k:()=>w});var t=a(4438),m=a(177),u=a(4412),y=a(4572),M=a(6354),S=a(1626);let w=(()=>{class h{constructor(i,c){if(this.http=c,this.isBrowser=(0,m.UE)(i),this.isBrowser){const l=localStorage.getItem("selectedYear"),v=localStorage.getItem("selectedMonth");if(l&&v)this.yearSubject=new u.t(l),this.monthSubject=new u.t(v);else{const g=new Date,p=g.getFullYear().toString(),f=(g.getMonth()+1).toString().padStart(2,"0");localStorage.setItem("selectedYear",p),localStorage.setItem("selectedMonth",f),this.yearSubject=new u.t(p),this.monthSubject=new u.t(f)}}else this.yearSubject=new u.t(""),this.monthSubject=new u.t("")}get selectedYear$(){return this.yearSubject.asObservable()}get selectedMonth$(){return this.monthSubject.asObservable()}get selectedDate$(){return(0,y.z)([this.selectedYear$,this.selectedMonth$]).pipe((0,M.T)(([i,c])=>({year:i,month:c})))}setDate(i,c){const l=c.toString().padStart(2,"0");this.yearSubject.next(i.toString()),this.monthSubject.next(l),this.isBrowser&&(localStorage.setItem("selectedYear",i.toString()),localStorage.setItem("selectedMonth",l))}getSelectedYear(){return this.yearSubject.value}getSelectedMonth(){return this.monthSubject.value}resetToCurrentDate(){const i=new Date,c=i.getFullYear().toString(),l=(i.getMonth()+1).toString().padStart(2,"0");this.yearSubject.next(c),this.monthSubject.next(l),this.isBrowser&&(localStorage.setItem("selectedYear",c),localStorage.setItem("selectedMonth",l))}notifyMonthChange(i,c,l){const p=`https://micartera-acd5b-default-rtdb.firebaseio.com/${i}/notificaciones.json`,f={mensaje:`Nuevo mes detectado: ${this.getMonthName(l)} ${c}`,leido:!1,fecha:(new Date).toLocaleString()};this.http.post(p,f).subscribe()}getMonthName(i){return["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][parseInt(i)-1]||""}static{this.\u0275fac=function(c){return new(c||h)(t.KVO(t.Agw),t.KVO(S.Qq))}}static{this.\u0275prov=t.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},3e3:(F,_,a)=>{a.r(_),a.d(_,{default:()=>E});var t=a(4438),m=a(177),u=a(7471),y=a(4796),M=a(3062);function S(o,d){if(1&o){const e=t.RV6();t.j41(0,"button",25),t.bIt("click",function(){const n=t.eBV(e).$implicit,r=t.XpG(3);return t.Njj(r.selectYear(n))}),t.EFF(1),t.k0s()}if(2&o){const e=d.$implicit;t.R7$(),t.SpI(" ",e," ")}}function w(o,d){if(1&o&&(t.j41(0,"div",23),t.DNE(1,S,2,1,"button",24),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.Y8G("ngForOf",e.years)}}function h(o,d){if(1&o){const e=t.RV6();t.j41(0,"button",30),t.bIt("click",function(){const n=t.eBV(e).index,r=t.XpG(3);return t.Njj(r.selectMonth(n))}),t.EFF(1),t.k0s()}if(2&o){const e=d.$implicit,s=d.index,n=t.XpG(3);t.AVh("bg-teal-500",s===n.selectedMonth)("text-cyan-700",s===n.selectedMonth),t.R7$(),t.SpI(" ",e," ")}}function C(o,d){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",26)(2,"button",27),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.clearYearSelection())}),t.EFF(3),t.k0s()(),t.j41(4,"div",28),t.DNE(5,h,2,5,"button",29),t.k0s()()}if(2&o){const e=t.XpG(2);t.R7$(3),t.SpI(" Cambiar A\xf1o (",e.selectedYear,") "),t.R7$(2),t.Y8G("ngForOf",e.months)}}function i(o,d){if(1&o){const e=t.RV6();t.j41(0,"div",16)(1,"div",17)(2,"h2",18),t.EFF(3),t.k0s(),t.DNE(4,w,2,1,"div",19)(5,C,6,2,"div",20),t.j41(6,"div",21)(7,"button",22),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeMonthModal())}),t.EFF(8," Cerrar "),t.k0s()()()()}if(2&o){const e=t.XpG();t.R7$(3),t.SpI(" ",e.selectedYear?"Selecciona un Mes":"Selecciona un A\xf1o"," "),t.R7$(),t.Y8G("ngIf",!e.selectedYear),t.R7$(),t.Y8G("ngIf",e.selectedYear)}}function c(o,d){if(1&o&&(t.j41(0,"span",31),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.unreadCount," ")}}function l(o,d){if(1&o){const e=t.RV6();t.j41(0,"div",35),t.bIt("click",function(){const n=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.markAsRead(n.id))}),t.j41(1,"p",36),t.EFF(2),t.k0s(),t.j41(3,"p",37),t.EFF(4),t.nI1(5,"date"),t.k0s()()}if(2&o){const e=d.$implicit;t.AVh("font-semibold",!e.leido),t.R7$(2),t.JRh(e.mensaje),t.R7$(2),t.JRh(t.i5U(5,4,e.fecha,"short"))}}function v(o,d){1&o&&(t.j41(0,"div",38),t.EFF(1," Sin notificaciones "),t.k0s())}function g(o,d){if(1&o&&(t.j41(0,"div",32),t.DNE(1,l,6,7,"div",33)(2,v,2,0,"div",34),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.notifications),t.R7$(),t.Y8G("ngIf",0===e.notifications.length)}}let p=(()=>{class o{constructor(e,s){this.dateService=e,this.router=s,this.showMonthModal=!1,this.years=[],this.months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],this.selectedYear=null,this.selectedMonth=null,this.currentYear="",this.currentMonth="",this.currentRoute="",this.userName="",this.isDarkMode=!1,this.notifications=[],this.unreadCount=0,this.showNotifications=!1,this.authService=(0,t.WQX)(y.u)}toggleDarkMode(){this.isDarkMode=!this.isDarkMode;const e=document.documentElement;this.isDarkMode?(e.classList.add("dark"),localStorage.setItem("darkMode","true")):(e.classList.remove("dark"),localStorage.setItem("darkMode","false"))}ngOnInit(){this.generateYearRange(2025,2050);const e=new Date,s=e.getFullYear(),n=e.getMonth(),r=this.dateService.getSelectedYear(),b=this.dateService.getSelectedMonth();r&&b?(this.selectedYear=parseInt(r),this.selectedMonth=parseInt(b)-1,this.dateService.setDate(this.selectedYear,this.selectedMonth+1)):(this.selectedYear=s,this.selectedMonth=n,this.dateService.setDate(s,n+1)),this.dateSubscription=this.dateService.selectedDate$.subscribe(({year:x,month:k})=>{this.currentYear=x??"",this.currentMonth=k??""}),this.routeSubscription=this.router.events.subscribe(x=>{if(x instanceof u.wF){const k=x.urlAfterRedirects.split("/");this.currentRoute=this.mapRouteToTitle(k[k.length-1])}}),this.loadNotifications(),"true"===localStorage.getItem("darkMode")&&(this.isDarkMode=!0,document.documentElement.classList.add("dark"))}ngOnDestroy(){this.dateSubscription?.unsubscribe(),this.routeSubscription?.unsubscribe()}generateYearRange(e,s){this.years=[];for(let n=e;n<=s;n++)this.years.push(n)}openMonthModal(){this.showMonthModal=!0}closeMonthModal(){this.showMonthModal=!1}clearYearSelection(){this.selectedYear=null}selectYear(e){this.selectedYear=e}selectMonth(e){this.selectedMonth=e,this.showMonthModal=!1;const s=e+1;this.dateService.setDate(this.selectedYear,s),console.log("Fecha seleccionada \u2192",this.selectedYear,s);const r=this.authService.getUser()?.id;if(r){const b=this.selectedYear.toString(),j=s.toString().padStart(2,"0");this.dateService.notifyMonthChange(r,b,j)}}mapRouteToTitle(e){switch(e){case"expense":return"Gastos";case"income":return"Ingresos";case"wallet":return"Cartera";case"saving":return"Ahorros";case"loan":return"Pr\xe9stamos";case"debt":return"Deudas";case"home":return"Inicio";default:return this.capitalize(e)}}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}toggleNotifications(){this.showNotifications=!this.showNotifications}loadNotifications(){const s=this.authService.getUser()?.id;s&&this.authService.getUserNotifications(s).subscribe(n=>{n&&(this.notifications=Object.entries(n).map(([r,b])=>({id:r,...b})),this.unreadCount=this.notifications.filter(r=>!r.leido).length)})}markAsRead(e){const n=this.authService.getUser()?.id;n&&this.authService.markNotificationAsRead(n,e).subscribe(()=>{this.notifications=this.notifications.map(r=>(r.id===e&&(r.leido=!0),r)),this.unreadCount=this.notifications.filter(r=>!r.leido).length})}logout(){this.authService.logout(),this.router.navigate(["/auth/login"])}static{this.\u0275fac=function(s){return new(s||o)(t.rXU(M.k),t.rXU(u.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-header"]],standalone:!0,features:[t.aNF],decls:24,vars:6,consts:[[1,"flex","flex-col-reverse","justify-between","gap-6","md:flex-row","md:items-center"],[1,"capitalize"],[1,"text-sm","font-semibold","text-gray-600","mb-1","dark:text-white"],[1,"tracking-normal","font-sans","text-base","font-semibold","leading-relaxed","text-gray-900","dark:text-white"],[1,"flex","items-center"],[1,"ml-4","bg-emerald-600","hover:bg-emerald-700","text-white","px-3","py-1","rounded-md",3,"click"],[1,"ml-4","flex","items-center","px-3","py-1","rounded-md","bg-gray-300","hover:bg-gray-400","dark:bg-gray-700","dark:text-white","transition",3,"click"],[1,"material-icons","mr-1"],["class","fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",4,"ngIf"],[1,"relative"],[1,"relative","p-2","rounded-full","hover:bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-blue-300",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-gray-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],["class","absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1",4,"ngIf"],["class","absolute right-0 mt-2 w-80 bg-white border rounded shadow-lg z-50 max-h-96 overflow-auto",4,"ngIf"],[1,"ml-4","flex","items-center","bg-slate-500","text-white","px-3","py-1","rounded-md","hover:bg-slate-600","transition",3,"click"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-black","bg-opacity-50","z-50"],[1,"bg-white","p-6","rounded-lg","shadow-lg","w-96","max-h-[90vh]","overflow-y-auto"],[1,"text-lg","font-semibold","mb-4","text-center"],["class","max-h-60 overflow-y-auto mb-4 px-1 py-2 border rounded-md space-y-2",4,"ngIf"],[4,"ngIf"],[1,"mt-4","flex","justify-end"],[1,"bg-red-500","text-white","px-4","py-2","rounded-lg","hover:bg-red-600",3,"click"],[1,"max-h-60","overflow-y-auto","mb-4","px-1","py-2","border","rounded-md","space-y-2"],["class","w-full px-4 py-2 rounded-lg bg-gray-200 hover:bg-teal-500 text-gray-800 hover:text-white transition text-center",3,"click",4,"ngFor","ngForOf"],[1,"w-full","px-4","py-2","rounded-lg","bg-gray-200","hover:bg-teal-500","text-gray-800","hover:text-white","transition","text-center",3,"click"],[1,"flex","justify-center","mb-4"],[1,"px-4","py-2","bg-teal-100","text-teal-800","font-medium","rounded-md","shadow-sm","hover:bg-teal-200","transition",3,"click"],[1,"grid","grid-cols-3","gap-2","mb-4"],["class","p-2 rounded-lg bg-gray-200 hover:bg-teal-500 text-gray-800 hover:text-white transition",3,"bg-teal-500","text-cyan-700","click",4,"ngFor","ngForOf"],[1,"p-2","rounded-lg","bg-gray-200","hover:bg-teal-500","text-gray-800","hover:text-white","transition",3,"click"],[1,"absolute","top-0","right-0","bg-red-500","text-white","text-xs","rounded-full","px-1"],[1,"absolute","right-0","mt-2","w-80","bg-white","border","rounded","shadow-lg","z-50","max-h-96","overflow-auto"],["class","p-4 border-b hover:bg-gray-100 cursor-pointer",3,"font-semibold","click",4,"ngFor","ngForOf"],["class","p-4 text-sm text-gray-500 text-center",4,"ngIf"],[1,"p-4","border-b","hover:bg-gray-100","cursor-pointer",3,"click"],[1,"text-sm","text-gray-700"],[1,"text-xs","text-gray-400"],[1,"p-4","text-sm","text-gray-500","text-center"]],template:function(s,n){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"p",2),t.EFF(3),t.k0s(),t.j41(4,"h6",3),t.EFF(5," Organiza tus Deberes con Claridad "),t.k0s()(),t.j41(6,"div",4)(7,"button",5),t.bIt("click",function(){return n.openMonthModal()}),t.EFF(8," Cambiar Mes "),t.k0s(),t.j41(9,"button",6),t.bIt("click",function(){return n.toggleDarkMode()}),t.j41(10,"span",7),t.EFF(11,"brightness_6"),t.k0s(),t.EFF(12),t.k0s(),t.DNE(13,i,9,3,"div",8),t.j41(14,"div",9)(15,"button",10),t.bIt("click",function(){return n.toggleNotifications()}),t.qSk(),t.j41(16,"svg",11),t.nrm(17,"path",12),t.k0s(),t.DNE(18,c,2,1,"span",13),t.k0s(),t.DNE(19,g,3,2,"div",14),t.k0s(),t.joV(),t.j41(20,"button",15),t.bIt("click",function(){return n.logout()}),t.j41(21,"span",7),t.EFF(22,"logout"),t.k0s(),t.EFF(23," Salir "),t.k0s()()()),2&s&&(t.R7$(3),t.Lme(" Fecha actual: ",n.currentYear,"/",n.currentMonth," "),t.R7$(9),t.SpI(" ",n.isDarkMode?"Claro":"Oscuro"," "),t.R7$(),t.Y8G("ngIf",n.showMonthModal),t.R7$(5),t.Y8G("ngIf",n.unreadCount>0),t.R7$(),t.Y8G("ngIf",n.showNotifications))},dependencies:[m.MD,m.Sq,m.bT,m.vh]})}}return o})(),f=(()=>{class o{static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-footer"]],standalone:!0,features:[t.aNF],decls:15,vars:0,consts:[[1,"py-2"],[1,"flex","w-full","flex-wrap","items-center","justify-center","gap-6","px-2","md:justify-between"],[1,"block","antialiased","font-sans","text-sm","leading-normal","font-normal","text-inherit"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor","aria-hidden","true",1,"-mt-0.5","inline-block","h-3.5","w-3.5"],[1,"flex","items-center","gap-4"],["href","https://juanzarta.github.io/GoldenPanda/","target","_blank",1,"block","antialiased","font-sans","text-sm","leading-normal","py-0.5","px-1","font-normal","text-inherit","transition-colors","hover:text-blue-500"],["href","https://api.whatsapp.com/send/?phone=573128622945&text&type=phone_number&app_absent=0","target","_blank",1,"block","antialiased","font-sans","text-sm","leading-normal","py-0.5","px-1","font-normal","text-inherit","transition-colors","hover:text-blue-500"],["href","https://github.com/JUANZARTA","target","_blank",1,"block","antialiased","font-sans","text-sm","leading-normal","py-0.5","px-1","font-normal","text-inherit","transition-colors","hover:text-blue-500"]],template:function(s,n){1&s&&(t.j41(0,"footer",0)(1,"div",1)(2,"p",2),t.EFF(3,"\xa9 2025, Created by Juan camilo Zarta "),t.qSk(),t.nrm(4,"svg",3),t.k0s(),t.joV(),t.j41(5,"ul",4)(6,"li")(7,"a",5),t.EFF(8,"Golden Panda"),t.k0s()(),t.j41(9,"li")(10,"a",6),t.EFF(11,"About Us"),t.k0s()(),t.j41(12,"li")(13,"a",7),t.EFF(14,"GitHub"),t.k0s()()()()())}})}}return o})(),E=(()=>{class o{static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-layout"]],standalone:!0,features:[t.aNF],decls:8,vars:0,consts:[[1,"min-h-screen","bg-gray-50/50","dark:gray-700"],[1,"p-4","w-full"],[1,"block","w-full","max-w-full","bg-transparent","text-white","shadow-none","rounded-xl","transition-all","px-0","py-1"],[1,"mt-12"],[1,"text-blue-gray-600","dark:text-white"]],template:function(s,n){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"nav",2),t.nrm(3,"app-header"),t.k0s(),t.j41(4,"div",3),t.nrm(5,"router-outlet"),t.k0s(),t.j41(6,"div",4),t.nrm(7,"app-footer"),t.k0s()()())},dependencies:[p,f,u.n3]})}}return o})()}}]);